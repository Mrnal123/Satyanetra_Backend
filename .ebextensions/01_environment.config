# AWS Elastic Beanstalk Configuration

# This file configures AWS Elastic Beanstalk deployment
# Place this file in the root directory of your project

# Application settings
ApplicationName: satyanetra-backend
EnvironmentName: satyanetra-backend-env
SolutionStackName: 64bit Amazon Linux 2 v5.8.7 running Corretto 17

# Instance settings
InstanceType: t2.micro
MinInstances: 1
MaxInstances: 4

# Environment variables (set these in AWS Console or via CLI)
# SPRING_PROFILES_ACTIVE=aws
# AWS_DB_URL=jdbc:postgresql://[rds-endpoint]:5432/satyanetra
# AWS_DB_USERNAME=postgres
# AWS_DB_PASSWORD=[your-password]
# FRONTEND_ORIGIN=https://satyanetra.vercel.app
# RATE_LIMIT_PER_MIN=3
# DEFAULT_TIMEOUT=60

# Load balancer settings
LoadBalancerType: application
HealthCheckPath: /health
HealthCheckInterval: 30
HealthCheckTimeout: 5

# Scaling triggers
ScalingTrigger:
  MetricName: CPUUtilization
  Statistic: Average
  Unit: Percent
  UpperThreshold: 80
  LowerThreshold: 20

# Security settings
SecurityGroups:
  - default
  - satyanetra-backend-sg

# Environment properties
EnvironmentProperties:
  - Namespace: aws:elasticbeanstalk:application:environment
    OptionName: SPRING_PROFILES_ACTIVE
    Value: aws
  - Namespace: aws:elasticbeanstalk:environment:process:default
    OptionName: HealthCheckPath
    Value: /health
  - Namespace: aws:autoscaling:asg
    OptionName: MinSize
    Value: 1
  - Namespace: aws:autoscaling:asg
    OptionName: MaxSize
    Value: 4

# VPC Configuration (optional - for advanced setup)
# VPCId: vpc-xxxxxx
# Subnets: subnet-xxxxxx,subnet-yyyyyy
# ELBSubnets: subnet-xxxxxx,subnet-yyyyyy